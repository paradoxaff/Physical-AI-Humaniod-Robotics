"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[929],{1044:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"modules/module-02-gazebo-unity/unity-simulation","title":"Chapter 2 - Unity Simulation","description":"Learning Objectives","source":"@site/docs/modules/module-02-gazebo-unity/unity-simulation.mdx","sourceDirName":"modules/module-02-gazebo-unity","slug":"/modules/module-02-gazebo-unity/unity-simulation","permalink":"/docs/modules/module-02-gazebo-unity/unity-simulation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/modules/module-02-gazebo-unity/unity-simulation.mdx","tags":[],"version":"current","frontMatter":{"title":"Chapter 2 - Unity Simulation","sidebar_label":"Unity Simulation"},"sidebar":"tutorialSidebar","previous":{"title":"Sim2Real Transfer","permalink":"/docs/modules/module-02-gazebo-unity/sim2real-transfer"},"next":{"title":"Overview","permalink":"/docs/modules/module-03-isaac/"}}');var r=i(4848),o=i(8453);const a={title:"Chapter 2 - Unity Simulation",sidebar_label:"Unity Simulation"},s="Chapter 2: Unity Simulation",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Physical AI Concept",id:"physical-ai-concept",level:2},{value:"System Architecture",id:"system-architecture",level:2},{value:"Unity-ROS Integration Architecture",id:"unity-ros-integration-architecture",level:3},{value:"Unity Simulation Pipeline",id:"unity-simulation-pipeline",level:3},{value:"Tools &amp; Software",id:"tools--software",level:2},{value:"Code / Configuration Examples",id:"code--configuration-examples",level:2},{value:"Unity Robot Controller Script",id:"unity-robot-controller-script",level:3},{value:"Unity Environment Manager Script",id:"unity-environment-manager-script",level:3},{value:"Unity Camera Sensor Script",id:"unity-camera-sensor-script",level:3},{value:"Practical Lab / Simulation",id:"practical-lab--simulation",level:2},{value:"Lab Exercise 1: Unity Robotics Setup",id:"lab-exercise-1-unity-robotics-setup",level:3},{value:"Lab Exercise 2: Robot Model Creation",id:"lab-exercise-2-robot-model-creation",level:3},{value:"Lab Exercise 3: ROS 2 Integration",id:"lab-exercise-3-ros-2-integration",level:3},{value:"Lab Exercise 4: Camera Sensor Integration",id:"lab-exercise-4-camera-sensor-integration",level:3},{value:"Lab Exercise 5: Domain Randomization",id:"lab-exercise-5-domain-randomization",level:3},{value:"Lab Exercise 6: Complex Environment Creation",id:"lab-exercise-6-complex-environment-creation",level:3},{value:"Real-World Mapping",id:"real-world-mapping",level:2},{value:"Industrial Applications",id:"industrial-applications",level:3},{value:"Entertainment &amp; Gaming",id:"entertainment--gaming",level:3},{value:"Research Applications",id:"research-applications",level:3},{value:"Key Success Factors",id:"key-success-factors",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"chapter-2-unity-simulation",children:"Chapter 2: Unity Simulation"})}),"\n",(0,r.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Set up Unity with Robotics Hub for robot simulation"}),"\n",(0,r.jsx)(e.li,{children:"Create humanoid robot models and environments in Unity"}),"\n",(0,r.jsx)(e.li,{children:"Implement physics-based simulation with realistic dynamics"}),"\n",(0,r.jsx)(e.li,{children:"Integrate Unity with ROS 2 using the Unity ROS TCP Connector"}),"\n",(0,r.jsx)(e.li,{children:"Design immersive virtual environments for humanoid robot training"}),"\n",(0,r.jsx)(e.li,{children:"Apply domain randomization techniques to improve Sim2Real transfer"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"physical-ai-concept",children:"Physical AI Concept"}),"\n",(0,r.jsx)(e.p,{children:"Unity provides a powerful 3D simulation environment that excels in creating visually rich, immersive virtual worlds for Physical AI systems. For humanoid robotics, Unity's advanced rendering capabilities and flexible physics engine enable the creation of realistic environments that closely resemble real-world scenarios. Unity's strength lies in its ability to create diverse, visually complex environments with high-quality graphics that can be used for training perception systems and testing robot behaviors in photorealistic settings."}),"\n",(0,r.jsx)(e.p,{children:"Unity's role in Physical AI includes:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Visual Realism"}),": High-quality rendering for training computer vision systems"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Environment Diversity"}),": Creation of varied scenarios for robust robot training"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Physics Simulation"}),": Realistic physics for testing robot interactions"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User Interaction"}),": Intuitive interface for designing and testing robot behaviors"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Scalability"}),": Cloud deployment options for large-scale simulation training"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"system-architecture",children:"System Architecture"}),"\n",(0,r.jsx)(e.h3,{id:"unity-ros-integration-architecture",children:"Unity-ROS Integration Architecture"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Unity-ROS Integration System:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Unity Engine                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502   Rendering     \u2502  \u2502   Physics       \u2502  \u2502   Input/Output  \u2502    \u2502\n\u2502  \u2502   Engine        \u2502  \u2502   Engine        \u2502  \u2502   Management    \u2502    \u2502\n\u2502  \u2502  \u2022 High-quality \u2502  \u2502  \u2022 PhysX       \u2502  \u2502  \u2022 Keyboard/    \u2502    \u2502\n\u2502  \u2502  \u2022 Real-time    \u2502  \u2502  \u2022 Collision   \u2502  \u2502    Mouse       \u2502    \u2502\n\u2502  \u2502  \u2022 Lighting     \u2502  \u2502  \u2022 Constraints \u2502  \u2502  \u2022 VR/AR       \u2502    \u2502\n\u2502  \u2502  \u2022 Materials    \u2502  \u2502  \u2022 Joints      \u2502  \u2502  \u2022 Gamepads    \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502              \u2502                    \u2502                    \u2502           \u2502\n\u2502              \u25bc                    \u25bc                    \u25bc           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502              Unity Robotics Components                      \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502  \u2502\n\u2502  \u2502  \u2502  ROS TCP    \u2502  \u2502  Robotics   \u2502  \u2502  Simulation \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502  Connector  \u2502  \u2502  Hub        \u2502  \u2502  Assets     \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502  \u2022 Publishers\u2502  \u2502  \u2022 URDF     \u2502  \u2502  \u2022 Humanoid \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502  \u2022 Subscribers\u2502 \u2502  Importer   \u2502  \u2502    Models   \u2502        \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                     \u2502                            \u2502\n\u2502                                     \u25bc                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502                   ROS 2 Ecosystem                           \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502  \u2502\n\u2502  \u2502  \u2502   Robot     \u2502  \u2502  Planning   \u2502  \u2502  Perception  \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502   Control   \u2502  \u2502  & Navigation\u2502  \u2502  & Learning \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502  Nodes      \u2502  \u2502  Nodes      \u2502  \u2502  Nodes      \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502  \u2022 Balance  \u2502  \u2502  \u2022 Path     \u2502  \u2502  \u2022 Vision   \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502  \u2022 Locomotion\u2502 \u2502  Planning   \u2502  \u2502  Processing \u2502        \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"unity-simulation-pipeline",children:"Unity Simulation Pipeline"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Simulation Training Pipeline:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Environment   \u2502    \u2502    Training     \u2502    \u2502   Transfer      \u2502\n\u2502   Generation    \u2502\u2500\u2500\u2500\u25b6\u2502    Process      \u2502\u2500\u2500\u2500\u25b6\u2502   Validation    \u2502\n\u2502  \u2022 Procedural   \u2502    \u2502  \u2022 Multiple    \u2502    \u2502  \u2022 Performance  \u2502\n\u2502    Generation  \u2502    \u2502    Episodes     \u2502    \u2502    Metrics     \u2502\n\u2502  \u2022 Domain      \u2502    \u2502  \u2022 Reward      \u2502    \u2502  \u2022 Reality Gap  \u2502\n\u2502    Randomization\u2502    \u2502    Shaping     \u2502    \u2502    Analysis    \u2502\n\u2502  \u2022 Scene       \u2502    \u2502  \u2022 Curriculum  \u2502    \u2502  \u2022 Adaptation  \u2502\n\u2502    Variation   \u2502    \u2502    Learning    \u2502    \u2502    Strategies   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h2,{id:"tools--software",children:"Tools & Software"}),"\n",(0,r.jsx)(e.p,{children:"This chapter uses:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Unity 2021.3 LTS or later"})," - Core 3D development platform"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Unity Robotics Hub"})," - Package for robotics simulation"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Unity ROS TCP Connector"})," - Bridge between Unity and ROS 2"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"URDF Importer"})," - Tool for importing ROS robot models"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"ML-Agents Toolkit"})," - For reinforcement learning in Unity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"ROS 2 Humble Hawksbill"})," - Integration with robot control"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"NVIDIA Omniverse"})," - Advanced simulation (optional)"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"code--configuration-examples",children:"Code / Configuration Examples"}),"\n",(0,r.jsx)(e.h3,{id:"unity-robot-controller-script",children:"Unity Robot Controller Script"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-csharp",children:'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Geometry;\nusing RosMessageTypes.Std;\nusing RosMessageTypes.Sensor;\n\npublic class UnityHumanoidController : MonoBehaviour\n{\n    [Header("Robot Configuration")]\n    public float moveSpeed = 2.0f;\n    public float rotationSpeed = 50.0f;\n    public float jumpForce = 5.0f;\n\n    [Header("ROS Connection")]\n    public string robotName = "unity_humanoid";\n\n    [Header("Joint Configuration")]\n    public Transform head;\n    public Transform leftArm;\n    public Transform rightArm;\n    public Transform leftLeg;\n    public Transform rightLeg;\n\n    private ROSConnection ros;\n    private Rigidbody rb;\n    private bool isGrounded = true;\n\n    // ROS topics\n    private string cmdVelTopic = "/cmd_vel";\n    private string jointStatesTopic = "/joint_states";\n    private string imuTopic = "/imu/data";\n\n    void Start()\n    {\n        // Initialize components\n        rb = GetComponent<Rigidbody>();\n        if (rb == null)\n        {\n            rb = gameObject.AddComponent<Rigidbody>();\n        }\n\n        // Initialize ROS connection\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.RegisterPublisher<TwistMsg>(cmdVelTopic);\n        ros.RegisterPublisher<ImuMsg>(imuTopic);\n\n        // Subscribe to ROS topics\n        ros.Subscribe<TwistMsg>(cmdVelTopic, OnCmdVelReceived);\n\n        Debug.Log($"Unity humanoid controller initialized for {robotName}");\n    }\n\n    void Update()\n    {\n        // Send IMU data periodically\n        if (Time.time % 0.1f < Time.deltaTime) // Every 0.1 seconds\n        {\n            PublishImuData();\n        }\n    }\n\n    void FixedUpdate()\n    {\n        // Process physics-based movement\n        ProcessMovement();\n    }\n\n    void OnCmdVelReceived(TwistMsg cmdVel)\n    {\n        // Apply linear velocity from ROS command\n        Vector3 linearVelocity = new Vector3((float)cmdVel.linear.x, 0, (float)cmdVel.linear.y);\n        rb.velocity = linearVelocity * moveSpeed;\n\n        // Apply angular velocity for rotation\n        float angularVelocity = (float)cmdVel.angular.z;\n        transform.Rotate(Vector3.up, angularVelocity * rotationSpeed * Time.fixedDeltaTime);\n    }\n\n    void ProcessMovement()\n    {\n        // Ground check for humanoid locomotion\n        RaycastHit hit;\n        if (Physics.Raycast(transform.position, Vector3.down, out hit, 1.1f))\n        {\n            isGrounded = true;\n        }\n        else\n        {\n            isGrounded = false;\n        }\n\n        // Apply jump if commanded (simplified)\n        if (Input.GetKeyDown(KeyCode.Space) && isGrounded)\n        {\n            rb.AddForce(Vector3.up * jumpForce, ForceMode.Impulse);\n        }\n    }\n\n    void PublishImuData()\n    {\n        if (ros == null) return;\n\n        // Create IMU message\n        var imuMsg = new ImuMsg();\n        imuMsg.header = new HeaderMsg();\n        imuMsg.header.stamp = new TimeStamp(ROSConnection.GetNodeHandle().GetClock().Now().Secs,\n                                           ROSConnection.GetNodeHandle().GetClock().Now().Nanos);\n        imuMsg.header.frame_id = "imu_link";\n\n        // Fill in orientation (simplified)\n        imuMsg.orientation.x = transform.rotation.x;\n        imuMsg.orientation.y = transform.rotation.y;\n        imuMsg.orientation.z = transform.rotation.z;\n        imuMsg.orientation.w = transform.rotation.w;\n\n        // Fill in angular velocity (simplified)\n        imuMsg.angular_velocity.x = rb.angularVelocity.x;\n        imuMsg.angular_velocity.y = rb.angularVelocity.y;\n        imuMsg.angular_velocity.z = rb.angularVelocity.z;\n\n        // Fill in linear acceleration (simplified)\n        imuMsg.linear_acceleration.x = rb.velocity.x;\n        imuMsg.linear_acceleration.y = rb.velocity.y;\n        imuMsg.linear_acceleration.z = rb.velocity.z;\n\n        // Publish IMU message\n        ros.Publish(imuTopic, imuMsg);\n    }\n\n    void OnApplicationQuit()\n    {\n        if (ros != null)\n        {\n            ros.Close();\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"unity-environment-manager-script",children:"Unity Environment Manager Script"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-csharp",children:'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Std;\n\npublic class UnityEnvironmentManager : MonoBehaviour\n{\n    [Header("Environment Configuration")]\n    public float simulationSpeed = 1.0f;\n    public bool enableDomainRandomization = true;\n    public int seed = 0;\n\n    [Header("Randomization Parameters")]\n    public float minLightIntensity = 0.5f;\n    public float maxLightIntensity = 2.0f;\n    public Color[] possibleGroundColors;\n\n    private ROSConnection ros;\n    private List<Renderer> randomizedObjects = new List<Renderer>();\n\n    void Start()\n    {\n        // Initialize ROS connection\n        ros = ROSConnection.GetOrCreateInstance();\n\n        // Initialize randomization\n        if (enableDomainRandomization)\n        {\n            Random.InitState(seed);\n            SetupRandomization();\n        }\n\n        Debug.Log("Unity environment manager initialized");\n    }\n\n    void SetupRandomization()\n    {\n        // Find all objects that can be randomized\n        Renderer[] renderers = FindObjectsOfType<Renderer>();\n        foreach (Renderer r in renderers)\n        {\n            randomizedObjects.Add(r);\n        }\n\n        Debug.Log($"Found {randomizedObjects.Count} objects for randomization");\n    }\n\n    public void RandomizeEnvironment()\n    {\n        if (!enableDomainRandomization) return;\n\n        // Randomize lighting\n        Light[] lights = FindObjectsOfType<Light>();\n        foreach (Light light in lights)\n        {\n            light.intensity = Random.Range(minLightIntensity, maxLightIntensity);\n        }\n\n        // Randomize object materials\n        foreach (Renderer renderer in randomizedObjects)\n        {\n            if (renderer.material != null)\n            {\n                // Randomize color\n                if (possibleGroundColors.Length > 0)\n                {\n                    Color randomColor = possibleGroundColors[Random.Range(0, possibleGroundColors.Length)];\n                    renderer.material.color = randomColor;\n                }\n\n                // Randomize other properties as needed\n                float randomScale = Random.Range(0.8f, 1.2f);\n                renderer.transform.localScale = Vector3.one * randomScale;\n            }\n        }\n\n        Debug.Log("Environment randomized");\n    }\n\n    void Update()\n    {\n        // Periodically randomize environment if enabled\n        if (enableDomainRandomization && Time.time % 5.0f < Time.deltaTime) // Every 5 seconds\n        {\n            RandomizeEnvironment();\n        }\n    }\n\n    public void ResetEnvironment()\n    {\n        // Reset environment to initial state\n        Random.InitState(seed);\n        SetupRandomization();\n        RandomizeEnvironment();\n\n        Debug.Log("Environment reset");\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"unity-camera-sensor-script",children:"Unity Camera Sensor Script"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-csharp",children:'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Sensor;\nusing RosMessageTypes.Std;\nusing System.Threading.Tasks;\n\npublic class UnityCameraSensor : MonoBehaviour\n{\n    [Header("Camera Configuration")]\n    public Camera cameraComponent;\n    public int imageWidth = 640;\n    public int imageHeight = 480;\n    public float publishRate = 30.0f; // Hz\n\n    [Header("ROS Configuration")]\n    public string cameraTopic = "/camera/image_raw";\n    public string cameraInfoTopic = "/camera/camera_info";\n\n    private ROSConnection ros;\n    private RenderTexture renderTexture;\n    private Texture2D texture2D;\n    private float lastPublishTime;\n\n    void Start()\n    {\n        // Initialize camera if not assigned\n        if (cameraComponent == null)\n        {\n            cameraComponent = GetComponent<Camera>();\n        }\n\n        // Create render texture\n        renderTexture = new RenderTexture(imageWidth, imageHeight, 24);\n        cameraComponent.targetTexture = renderTexture;\n\n        // Create texture for reading\n        texture2D = new Texture2D(imageWidth, imageHeight, TextureFormat.RGB24, false);\n\n        // Initialize ROS connection\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.RegisterPublisher<ImageMsg>(cameraTopic);\n        ros.RegisterPublisher<CameraInfoMsg>(cameraInfoTopic);\n\n        lastPublishTime = Time.time;\n\n        Debug.Log($"Unity camera sensor initialized with resolution {imageWidth}x{imageHeight}");\n    }\n\n    void Update()\n    {\n        // Publish images at specified rate\n        if (Time.time - lastPublishTime >= 1.0f / publishRate)\n        {\n            PublishCameraData();\n            lastPublishTime = Time.time;\n        }\n    }\n\n    void PublishCameraData()\n    {\n        if (ros == null) return;\n\n        // Read pixels from render texture\n        RenderTexture.active = renderTexture;\n        texture2D.ReadPixels(new Rect(0, 0, imageWidth, imageHeight), 0, 0);\n        texture2D.Apply();\n\n        // Get raw image data\n        byte[] imageData = texture2D.EncodeToPNG();\n\n        // Create and publish image message\n        var imageMsg = new ImageMsg();\n        imageMsg.header = new HeaderMsg();\n        imageMsg.header.stamp = new TimeStamp(ROSConnection.GetNodeHandle().GetClock().Now().Secs,\n                                             ROSConnection.GetNodeHandle().GetClock().Now().Nanos);\n        imageMsg.header.frame_id = "camera_optical_frame";\n        imageMsg.height = (uint)imageHeight;\n        imageMsg.width = (uint)imageWidth;\n        imageMsg.encoding = "rgb8";\n        imageMsg.is_bigendian = 0;\n        imageMsg.step = (uint)(imageWidth * 3); // 3 bytes per pixel for RGB\n        imageMsg.data = imageData;\n\n        ros.Publish(cameraTopic, imageMsg);\n\n        // Publish camera info\n        PublishCameraInfo();\n    }\n\n    void PublishCameraInfo()\n    {\n        var cameraInfoMsg = new CameraInfoMsg();\n        cameraInfoMsg.header = new HeaderMsg();\n        cameraInfoMsg.header.stamp = new TimeStamp(ROSConnection.GetNodeHandle().GetClock().Now().Secs,\n                                                  ROSConnection.GetNodeHandle().GetClock().Now().Nanos);\n        cameraInfoMsg.header.frame_id = "camera_optical_frame";\n        cameraInfoMsg.height = (uint)imageHeight;\n        cameraInfoMsg.width = (uint)imageWidth;\n\n        // Simple camera matrix (approximate)\n        cameraInfoMsg.K = new double[9] {\n            320, 0, 320,    // fx, 0, cx\n            0, 320, 240,    // 0, fy, cy\n            0, 0, 1         // 0, 0, 1\n        };\n\n        // No distortion\n        cameraInfoMsg.D = new double[5] { 0, 0, 0, 0, 0 };\n        cameraInfoMsg.R = new double[9] { 1, 0, 0, 0, 1, 0, 0, 0, 1 };\n        cameraInfoMsg.P = new double[12] { 320, 0, 320, 0, 0, 320, 240, 0, 0, 0, 1, 0 };\n\n        ros.Publish(cameraInfoTopic, cameraInfoMsg);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"practical-lab--simulation",children:"Practical Lab / Simulation"}),"\n",(0,r.jsx)(e.h3,{id:"lab-exercise-1-unity-robotics-setup",children:"Lab Exercise 1: Unity Robotics Setup"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Install Unity Hub and Unity 2021.3 LTS or later"}),"\n",(0,r.jsx)(e.li,{children:"Create a new 3D project"}),"\n",(0,r.jsxs)(e.li,{children:["Import Unity Robotics Hub package:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Window \u2192 Package Manager"}),"\n",(0,r.jsx)(e.li,{children:'Install "ROS TCP Connector" and "URDF Importer"'}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Set up basic scene with a plane and simple robot model"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"lab-exercise-2-robot-model-creation",children:"Lab Exercise 2: Robot Model Creation"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["Create a simple humanoid robot in Unity with:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Torso, head, arms, and legs"}),"\n",(0,r.jsx)(e.li,{children:"Appropriate joints and colliders"}),"\n",(0,r.jsx)(e.li,{children:"Rigidbody components for physics simulation"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Add the UnityHumanoidController script to your robot"}),"\n",(0,r.jsx)(e.li,{children:"Test basic movement in the Unity editor"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"lab-exercise-3-ros-2-integration",children:"Lab Exercise 3: ROS 2 Integration"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Install ROS 2 Humble Hawksbill on your system"}),"\n",(0,r.jsxs)(e.li,{children:["Set up the Unity ROS TCP Connector:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Configure IP addresses for communication"}),"\n",(0,r.jsx)(e.li,{children:"Test connection between Unity and ROS 2"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Create a simple ROS 2 node to send movement commands to Unity"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"lab-exercise-4-camera-sensor-integration",children:"Lab Exercise 4: Camera Sensor Integration"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Add the UnityCameraSensor script to a camera in your scene"}),"\n",(0,r.jsx)(e.li,{children:"Configure camera parameters (resolution, frame rate)"}),"\n",(0,r.jsx)(e.li,{children:"Verify that camera data is published to ROS 2 topics"}),"\n",(0,r.jsxs)(e.li,{children:["Test image processing using ROS 2 tools:","\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 run image_view image_view image:=/camera/image_raw\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"lab-exercise-5-domain-randomization",children:"Lab Exercise 5: Domain Randomization"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Implement the UnityEnvironmentManager script in your scene"}),"\n",(0,r.jsxs)(e.li,{children:["Add domain randomization features:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Lighting variations"}),"\n",(0,r.jsx)(e.li,{children:"Material changes"}),"\n",(0,r.jsx)(e.li,{children:"Object placement variations"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Test how domain randomization affects robot performance"}),"\n",(0,r.jsx)(e.li,{children:"Evaluate the impact on Sim2Real transfer"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"lab-exercise-6-complex-environment-creation",children:"Lab Exercise 6: Complex Environment Creation"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Create a complex environment with obstacles, stairs, and varied terrain"}),"\n",(0,r.jsx)(e.li,{children:"Implement navigation tasks for your humanoid robot"}),"\n",(0,r.jsx)(e.li,{children:"Test robot's ability to navigate the environment"}),"\n",(0,r.jsx)(e.li,{children:"Add sensors and test perception in the complex environment"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"real-world-mapping",children:"Real-World Mapping"}),"\n",(0,r.jsx)(e.h3,{id:"industrial-applications",children:"Industrial Applications"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Automotive"}),": Unity used for training autonomous vehicle perception systems"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Manufacturing"}),": Robot training in Unity environments representing factory floors"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Logistics"}),": Warehouse robot simulation with Unity for package handling"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"entertainment--gaming",children:"Entertainment & Gaming"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Robot Games"}),": Unity used to create robot simulation games for training"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"VR Training"}),": Immersive robot operation training in Unity VR environments"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Simulation Games"}),": Complex robot simulation games for algorithm testing"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"research-applications",children:"Research Applications"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"DeepMind"}),": Unity used for reinforcement learning research"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"OpenAI"}),": Unity environments for training dexterous manipulation"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"University Research"}),": Various institutions use Unity for humanoid robot research"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"key-success-factors",children:"Key Success Factors"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Visual Fidelity"}),": High-quality rendering for effective perception training"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Physics Accuracy"}),": Realistic physics simulation for reliable behavior transfer"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Environment Diversity"}),": Varied scenarios for robust algorithm development"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Integration Quality"}),": Seamless ROS 2 connectivity for real-world deployment"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(e.p,{children:"Chapter 2 has introduced Unity as a powerful simulation environment for Physical AI and humanoid robotics. We've explored Unity's capabilities for creating visually rich, immersive virtual worlds with advanced rendering and physics simulation. The examples demonstrated how to create humanoid robot controllers, manage environments with domain randomization, and integrate Unity with ROS 2 for comprehensive robot simulation. The hands-on lab exercises provide practical experience with Unity robotics setup, sensor integration, and environment creation. This foundation enables the development of sophisticated simulation environments that can effectively prepare humanoid robots for real-world tasks."})]})}function m(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>s});var t=i(6540);const r={},o=t.createContext(r);function a(n){const e=t.useContext(o);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);